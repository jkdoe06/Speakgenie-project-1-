<!DOCTYPE html>
<html lang="en">
<head>
    <title>Workflow Popularity Dashboard</title>
    <!-- I keep the external CSS link in case I want extra styling later -->
    <link rel="stylesheet" href="/static/styles.css">

    <!-- Local CSS here handles the layout so it doesn't randomly break -->
    <style>
        /* Whole app layout: sidebar on the left, content on the right */
        body {
            margin: 0;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
            background-color: #f3f4f6;
            color: #111827;
        }

        .layout {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar look + feel */
        .sidebar {
            width: 260px;
            background-color: #020617;
            color: #f9fafb;
            display: flex;
            flex-direction: column;
            padding: 24px 20px;
            box-sizing: border-box;
        }

        .sidebar-title {
            font-weight: 600;
            font-size: 14px;
            text-transform: uppercase;
            margin-bottom: 12px;
        }

        .sidebar-section {
            margin-top: 24px;
        }

        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .sidebar-nav a {
            color: #e5e7eb;
            text-decoration: none;
            font-weight: 600;
            font-size: 15px;
        }

        .sidebar-nav a:hover {
            color: #ffffff;
        }

        .sidebar-label {
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 6px;
        }

        .sidebar select {
            width: 100%;
            padding: 6px 8px;
            border-radius: 4px;
            border: 1px solid #4b5563;
            background-color: #020617;
            color: #e5e7eb;
            font-size: 14px;
        }

        .sidebar select:focus {
            outline: none;
            border-color: #60a5fa;
        }

        /* Main content area where each page renders */
        .content {
            flex: 1;
            padding: 40px 48px;
            box-sizing: border-box;
            background-color: #f9fafb;
        }

        /* Tables so the workflows/leaderboard/history look clean */
        table {
            border-collapse: collapse;
            width: 100%;
            background-color: #ffffff;
            box-shadow: 0 1px 2px rgba(15, 23, 42, 0.08);
        }

        th, td {
            border: 1px solid #e5e7eb;
            padding: 8px 10px;
            font-size: 14px;
        }

        th {
            background-color: #f3f4f6;
            text-align: left;
        }

        tr:nth-child(even) {
            background-color: #f9fafb;
        }
    </style>
</head>

<body>
    <!-- Split UI into sidebar + main content -->
    <div class="layout">

        <!-- Left sidebar for nav + country selector -->
        <div class="sidebar">
            <div class="sidebar-section sidebar-title">
                Navigation
            </div>

            <!-- Links to each page, keep the country param so filter stays in sync -->
            <nav class="sidebar-nav">
                <a href="/?country={{ country }}">Home</a>
                <a href="/workflows?country={{ country }}">Latest Workflows</a>
                <a href="/workflows/leaderboard?country={{ country }}">Leaderboard</a>
                <a href="/workflows/history?country={{ country }}">History</a>
            </nav>

            <!-- Country dropdown lives in the sidebar -->
            <div class="sidebar-section">
                <div class="sidebar-label">Country</div>
                <form id="countryForm" method="GET">
                    <select name="country" id="countrySelect">
                        <option value="US" {% if country == 'US' %}selected{% endif %}>United States</option>
                        <option value="IN" {% if country == 'IN' %}selected{% endif %}>India</option>
                    </select>
                </form>
            </div>
        </div>

        <!-- Right side: actual page content injects here -->
        <div class="content">
            {% block content %}{% endblock %}
        </div>
    </div>

    <!-- When I change the dropdown, I just reload the same page with ?country=... -->
    <script>
        const select = document.getElementById('countrySelect');
        select.addEventListener('change', () => {
            const url = new URL(window.location.href);
            url.searchParams.set('country', select.value);
            window.location.href = url.toString();
        });
    </script>
</body>
</html>
